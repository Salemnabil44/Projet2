#!/bin/bash

# Fonction pour établir la connexion SSH et confirmer
establish_ssh_connection() {
    echo "Etablissement de la connexion SSH..."
    # Remplacez 'utilisateur' et 'serveur' par vos propres informations
    ssh utilisateur@serveur echo "Connexion SSH établie."
    echo "Connexion SSH établie."
}

# Fonction pour éteindre à distance le serveur
remote_shutdown() {
    echo "Commande pour éteindre à distance le serveur..."
    # Commande pour éteindre le serveur à distance
    ssh utilisateur@serveur "sudo shutdown now"
    echo "Le serveur a été éteint."
}

# Fonction pour redémarrer le serveur à distance
remote_restart() {
    echo "Commande pour redémarrer à distance le serveur..."
    # Commande pour redémarrer le serveur à distance
    ssh utilisateur@serveur "sudo reboot"
    echo "Le serveur a été redémarré."
}

# Afficher un message d'introduction
echo "Bienvenue dans le script de gestion à distance du serveur."

# Etablir la connexion SSH
establish_ssh_connection

# Affichage du menu principal
while true; do
    echo "----- MENU -----"
    echo "1. Eteindre le serveur à distance"
    echo "2. Redémarrer le serveur à distance"
    echo "3. Quitter le script"

    read -p "Choisissez une option (1-3) : " choice
    case $choice in
        1) remote_shutdown ;;
        2) remote_restart ;;
        3) echo "Au revoir !"; break ;;
        *) echo "Option invalide. Veuillez entrer un nombre entre 1 et 3." ;;
    esac
done
